function sendAppointmentPendingNoticeToUser($recipientEmail, $recipientName, $appointmentDetails) {
    $mail = new PHPMailer(true);
    try {
        $mail->isSMTP();
        $mail->Host = 'smtp.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = $_ENV['EMAIL_USER'];
        $mail->Password = $_ENV['EMAIL_PASS'];
        $mail->SMTPSecure = 'tls';
        $mail->Port = 587;

        $mail->setFrom($_ENV['EMAIL_USER'], 'SafeSpace PH');
        $mail->addAddress($recipientEmail, $recipientName);

        $mail->isHTML(true);
        $mail->Subject = 'Appointment Request Received – SafeSpace PH';
        $mail->addEmbeddedImage('img/logo.png', 'logoimg');
        $mail->addEmbeddedImage('img/logo.png', 'logoimg_footer');

        // Extracting details from the $appointmentDetails array
        $lawyerName = $appointmentDetails['lawyerName'] ?? 'a lawyer';
        $appointmentDate = $appointmentDetails['appointmentDate'] ?? 'N/A';
        $appointmentTime = $appointmentDetails['appointmentTime'] ?? 'N/A';
        $meetingType = $appointmentDetails['meetingType'] ?? 'N/A';
        $caseTitle = $appointmentDetails['caseTitle'] ?? 'N/A';
        $caseDescription = $appointmentDetails['caseDescription'] ?? 'N/A';

        $mail->Body = "
        <!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>SafeSpace PH: Your Appointment Request is Pending!</title>
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; width: 100% !important; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        td { padding: 0; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        a { text-decoration: none; color: #8a2be2; }
        .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .header { background-color: #391053; padding: 20px 30px; text-align: center; color: white; }
        .header-logo { height: 70px; width: auto; vertical-align: middle; margin-right: 15px; }
        .header-title { font-size: 28px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); vertical-align: middle; }
        .content { padding: 30px; color: #333333; line-height: 1.6; font-size: 16px; }
        .content h2 { font-size: 22px; color: #5d00a0; margin-top: 25px; margin-bottom: 15px; }
        .content ul { list-style: none; padding: 0; margin: 0; }
        .content ul li { margin-bottom: 10px; padding-left: 25px; position: relative; }
        .content ul li:before { content: '•'; color: #8a2be2; font-size: 20px; position: absolute; left: 0; top: -2px; }
        .button-container { text-align: center; margin-top: 30px; margin-bottom: 20px; }
        .button { display: inline-block; background-color: #8a2be2; color: white; padding: 12px 25px; border-radius: 25px; font-size: 17px; font-weight: bold; text-decoration: none; transition: background-color 0.3s ease; }
        .button:hover { background-color: #6a0dad; }
        .footer { background-color: #391053; color: white; padding: 20px 30px; text-align: center; font-size: 14px; border-top: 1px solid #5d00a0; }
        .footer-branding { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }
        .footer-logo { height: 50px; width: auto; }
        .footer-title { font-size: 24px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); }
        .footer-links-container { margin-bottom: 10px; }
        .footer a { color: #e0caff; text-decoration: none; margin: 0 8px; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <center>
        <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%' style='background-color: #f4f4f4;'>
            <tr>
                <td align='center' style='padding: 20px 0;'>
                    <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='600' class='email-container'>
                        <tr>
                            <td class='header'>
                                <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%'>
                                    <tr>
                                        <td style='text-align: center;'>
                                            <img src=\"cid:logoimg\" alt=\"SafeSpace PH Logo\" style=\"height: 70px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                            <span class='header-title'>SafeSpace PH</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class='content'>
                                <p>Dear {$recipientName},</p>
                                <p>Thank you for requesting an appointment with **SafeSpace PH**! We've successfully received your booking request.</p>
                                <p>Your appointment is currently **pending approval**. Our team will review your request and connect you with an available lawyer as soon as possible. We appreciate your patience as we work to find the best match for your needs.</p>
                                <h2>Your Requested Appointment Details:</h2>
                                <ul>
                                    <li><strong>Preferred Lawyer:</strong> Attorney {$lawyerName}</li>
                                    <li><strong>Preferred Date:</strong> {$appointmentDate}</li>
                                    <li><strong>Preferred Time:</strong> {$appointmentTime} (PHT)</li>
                                    <li><strong>Meeting Type:</strong> {$meetingType}</li>
                                    <li><strong>Case Title/Concern:</strong> {$caseTitle}</li>
                                    <li><strong>Case Description:</strong> {$caseDescription}</li>
                                </ul>
                                <p>You will receive another email from us once your appointment has been confirmed and a lawyer has been assigned, or if we need to propose alternative slots. Please keep an eye on your inbox.</p>
                                <div class='button-container'>
                                    <a href='https://safespaceph.com/my-appointments' class='button'>Check My Appointments</a>
                                </div>
                                <p>Thank you for choosing SafeSpace PH. We are committed to providing you with the support you need.</p>
                                <p>Sincerely,<br>The SafeSpace PH Team</p>
                            </td>
                        </tr>
                        <tr>
                            <td class='footer'>
                                <div class='footer-branding'>
                                   <img src=\"cid:logoimg_footer\"alt=\"SafeSpace PH Logo\" style=\"height: 50px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                    <span class='footer-title'>SafeSpace PH</span>
                                </div>
                                <div class='footer-links-container'>
                                    <a href='https://safespaceph.com/about' class='footer-link'>About Us</a>
                                    <a href='https://safespaceph.com/services' class='footer-link'>Our Services</a>
                                    <a href='https://safespaceph.com/contact' class='footer-link'>Contact Us</a>
                                </div>
                                <p>&copy; 2025 SafeSpace PH. All rights reserved.</p>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </center>
</body>
</html>";
        $mail->send();
    } catch (Exception $e) {
        error_log("Appointment pending notice email error for {$recipientEmail}: {$mail->ErrorInfo}");
    }
}





function sendAppointmentAcceptedNoticeToUser($recipientEmail, $recipientName, $appointmentDetails) {
    $mail = new PHPMailer(true);
    try {
        $mail->isSMTP();
        $mail->Host = 'smtp.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = $_ENV['EMAIL_USER'];
        $mail->Password = $_ENV['EMAIL_PASS'];
        $mail->SMTPSecure = 'tls';
        $mail->Port = 587;

        $mail->setFrom($_ENV['EMAIL_USER'], 'SafeSpace PH');
        $mail->addAddress($recipientEmail, $recipientName);

        $mail->isHTML(true);
        $mail->Subject = 'Your SafeSpace PH Appointment is Confirmed!';
        $mail->addEmbeddedImage('img/logo.png', 'logoimg');
        $mail->addEmbeddedImage('img/logo.png', 'logoimg_footer');

        // Extracting details from the $appointmentDetails array
        $lawyerName = $appointmentDetails['lawyerName'] ?? 'N/A';
        $appointmentDate = $appointmentDetails['appointmentDate'] ?? 'N/A';
        $appointmentTime = $appointmentDetails['appointmentTime'] ?? 'N/A';
        $meetingType = $appointmentDetails['meetingType'] ?? 'N/A';
        $meetingLink = $appointmentDetails['meetingLink'] ?? '#'; // Provide a default or handle missing link
        $caseTitle = $appointmentDetails['caseTitle'] ?? 'N/A';
        $caseDescription = $appointmentDetails['caseDescription'] ?? 'N/A';

        $mail->Body = "
        <!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>SafeSpace PH: Your Appointment is Confirmed!</title>
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; width: 100% !important; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        td { padding: 0; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        a { text-decoration: none; color: #8a2be2; }
        .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .header { background-color: #391053; padding: 20px 30px; text-align: center; color: white; }
        .header-logo { height: 70px; width: auto; vertical-align: middle; margin-right: 15px; }
        .header-title { font-size: 28px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); vertical-align: middle; }
        .content { padding: 30px; color: #333333; line-height: 1.6; font-size: 16px; }
        .content h2 { font-size: 22px; color: #5d00a0; margin-top: 25px; margin-bottom: 15px; }
        .content ul { list-style: none; padding: 0; margin: 0; }
        .content ul li { margin-bottom: 10px; padding-left: 25px; position: relative; }
        .content ul li:before { content: '•'; color: #8a2be2; font-size: 20px; position: absolute; left: 0; top: -2px; }
        .button-container { text-align: center; margin-top: 30px; margin-bottom: 20px; }
        .button { display: inline-block; background-color: #8a2be2; color: white; padding: 12px 25px; border-radius: 25px; font-size: 17px; font-weight: bold; text-decoration: none; transition: background-color 0.3s ease; }
        .button:hover { background-color: #6a0dad; }
        .footer { background-color: #391053; color: white; padding: 20px 30px; text-align: center; font-size: 14px; border-top: 1px solid #5d00a0; }
        .footer-branding { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }
        .footer-logo { height: 50px; width: auto; }
        .footer-title { font-size: 24px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); }
        .footer-links-container { margin-bottom: 10px; }
        .footer a { color: #e0caff; text-decoration: none; margin: 0 8px; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <center>
        <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%' style='background-color: #f4f4f4;'>
            <tr>
                <td align='center' style='padding: 20px 0;'>
                    <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='600' class='email-container'>
                        <tr>
                            <td class='header'>
                                <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%'>
                                    <tr>
                                        <td style='text-align: center;'>
                                            <img src=\"cid:logoimg\" alt=\"SafeSpace PH Logo\" style=\"height: 70px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                            <span class='header-title'>SafeSpace PH</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class='content'>
                                <p>Dear {$recipientName},</p>
                                <p>Great news! Your **appointment with a lawyer** at SafeSpace PH has been successfully **accepted**.</p>
                                <p>We're pleased to inform you that **Attorney {$lawyerName}** has accepted your request and is ready to assist you.</p>
                                <h2>Your Confirmed Appointment Details:</h2>
                                <ul>
                                    <li><strong>Lawyer:</strong> Attorney {$lawyerName}</li>
                                    <li><strong>Date:</strong> {$appointmentDate}</li>
                                    <li><strong>Time:</strong> {$appointmentTime} (PHT)</li>
                                    <li><strong>Meeting Type:</strong> {$meetingType}</li>
                                    <li><strong>Meeting Link:</strong> <a href='{$meetingLink}' style='color: #8a2be2; word-break: break-all;'>{$meetingLink}</a></li>
                                    <li><strong>Case Title/Concern:</strong> {$caseTitle}</li>
                                    <li><strong>Case Description:</strong> {$caseDescription}</li>
                                </ul>
                                <p>Please make sure to click the **meeting link** at the scheduled time to join your consultation. If you have any documents or information relevant to your case, please prepare them beforehand.</p>
                                <p>We encourage you to review the **Safe Spaces Act (RA 11313)** beforehand to better understand your rights. You can find more information on our website.</p>
                                <div class='button-container'>
                                    <a href='https://safespaceph.com/my-appointments' class='button'>View My Appointments</a>
                                </div>
                                <p>If you need to reschedule or cancel your appointment, please do so at least 24 hours in advance through your SafeSpace PH account or by contacting our support team.</p>
                                <p>We look forward to assisting you.</p>
                                <p>Sincerely,<br>The SafeSpace PH Team</p>
                            </td>
                        </tr>
                        <tr>
                            <td class='footer'>
                                <div class='footer-branding'>
                                   <img src=\"cid:logoimg_footer\"alt=\"SafeSpace PH Logo\" style=\"height: 50px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                    <span class='footer-title'>SafeSpace PH</span>
                                </div>
                                <div class='footer-links-container'>
                                    <a href='https://safespaceph.com/about' class='footer-link'>About Us</a>
                                    <a href='https://safespaceph.com/services' class='footer-link'>Our Services</a>
                                    <a href='https://safespaceph.com/contact' class='footer-link'>Contact Us</a>
                                </div>
                                <p>&copy; 2025 SafeSpace PH. All rights reserved.</p>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </tr>
        </table>
    </center>
</body>
</html>";
        $mail->send();
    } catch (Exception $e) {
        error_log("Appointment accepted email error for {$recipientEmail}: {$mail->ErrorInfo}");
    }
}



function sendMeetingLinkUpdateNoticeToUser($recipientEmail, $recipientName, $appointmentDetails) {
    $mail = new PHPMailer(true);
    try {
        $mail->isSMTP();
        $mail->Host = 'smtp.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = $_ENV['EMAIL_USER'];
        $mail->Password = $_ENV['EMAIL_PASS'];
        $mail->SMTPSecure = 'tls';
        $mail->Port = 587;

        $mail->setFrom($_ENV['EMAIL_USER'], 'SafeSpace PH');
        $mail->addAddress($recipientEmail, $recipientName);

        $mail->isHTML(true);
        $mail->Subject = 'Important: Your SafeSpace PH Meeting Link Has Been Updated';
        $mail->addEmbeddedImage('img/logo.png', 'logoimg');
        $mail->addEmbeddedImage('img/logo.png', 'logoimg_footer');

        // Extracting details from the $appointmentDetails array
        $lawyerName = $appointmentDetails['lawyerName'] ?? 'N/A';
        $appointmentDate = $appointmentDetails['appointmentDate'] ?? 'N/A';
        $appointmentTime = $appointmentDetails['appointmentTime'] ?? 'N/A';
        $oldMeetingLink = $appointmentDetails['oldMeetingLink'] ?? 'N/A';
        $newMeetingLink = $appointmentDetails['newMeetingLink'] ?? '#'; // Provide a default or handle missing link
        $caseTitle = $appointmentDetails['caseTitle'] ?? 'N/A';

        $mail->Body = "
        <!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>SafeSpace PH: Meeting Link Updated</title>
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; width: 100% !important; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        td { padding: 0; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        a { text-decoration: none; color: #8a2be2; }
        .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .header { background-color: #391053; padding: 20px 30px; text-align: center; color: white; }
        .header-logo { height: 70px; width: auto; vertical-align: middle; margin-right: 15px; }
        .header-title { font-size: 28px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); vertical-align: middle; }
        .content { padding: 30px; color: #333333; line-height: 1.6; font-size: 16px; }
        .content h2 { font-size: 22px; color: #5d00a0; margin-top: 25px; margin-bottom: 15px; }
        .content ul { list-style: none; padding: 0; margin: 0; }
        .content ul li { margin-bottom: 10px; padding-left: 25px; position: relative; }
        .content ul li:before { content: '•'; color: #8a2be2; font-size: 20px; position: absolute; left: 0; top: -2px; }
        .button-container { text-align: center; margin-top: 30px; margin-bottom: 20px; }
        .button { display: inline-block; background-color: #8a2be2; color: white; padding: 12px 25px; border-radius: 25px; font-size: 17px; font-weight: bold; text-decoration: none; transition: background-color 0.3s ease; }
        .button:hover { background-color: #6a0dad; }
        .footer { background-color: #391053; color: white; padding: 20px 30px; text-align: center; font-size: 14px; border-top: 1px solid #5d00a0; }
        .footer-branding { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }
        .footer-logo { height: 50px; width: auto; }
        .footer-title { font-size: 24px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); }
        .footer-links-container { margin-bottom: 10px; }
        .footer a { color: #e0caff; text-decoration: none; margin: 0 8px; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <center>
        <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%' style='background-color: #f4f4f4;'>
            <tr>
                <td align='center' style='padding: 20px 0;'>
                    <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='600' class='email-container'>
                        <tr>
                            <td class='header'>
                                <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%'>
                                    <tr>
                                        <td style='text-align: center;'>
                                            <img src=\"cid:logoimg\" alt=\"SafeSpace PH Logo\" style=\"height: 70px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                            <span class='header-title'>SafeSpace PH</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class='content'>
                                <p>Dear {$recipientName},</p>
                                <p>This is an **important update** regarding your upcoming appointment with **Attorney {$lawyerName}** at SafeSpace PH.</p>
                                <p>The **meeting link for your appointment has been updated**.</p>
                                <h2>Updated Appointment Details:</h2>
                                <ul>
                                    <li><strong>Lawyer:</strong> Attorney {$lawyerName}</li>
                                    <li><strong>Date:</strong> {$appointmentDate}</li>
                                    <li><strong>Time:</strong> {$appointmentTime} (PHT)</li>
                                    <li><strong>Case Title/Concern:</strong> {$caseTitle}</li>
                                    <li><strong>Old Meeting Link:</strong> <span style='color: #888; text-decoration: line-through;'>{$oldMeetingLink}</span></li>
                                    <li><strong>New Meeting Link:</strong> <a href='{$newMeetingLink}' style='color: #8a2be2; word-break: break-all;'>{$newMeetingLink}</a></li>
                                </ul>
                                <p>Please make sure to use the **NEW Meeting Link** provided above when joining your consultation. We recommend updating any calendar invites or notes you may have.</p>
                                <div class='button-container'>
                                    <a href='https://safespaceph.com/my-appointments' class='button'>View My Appointments</a>
                                </div>
                                <p>If you have any questions or need further assistance, please don't hesitate to contact our support team.</p>
                                <p>Sincerely,<br>The SafeSpace PH Team</p>
                            </td>
                        </tr>
                        <tr>
                            <td class='footer'>
                                <div class='footer-branding'>
                                   <img src=\"cid:logoimg_footer\"alt=\"SafeSpace PH Logo\" style=\"height: 50px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                    <span class='footer-title'>SafeSpace PH</span>
                                </div>
                                <div class='footer-links-container'>
                                    <a href='https://safespaceph.com/about' class='footer-link'>About Us</a>
                                    <a href='https://safespaceph.com/services' class='footer-link'>Our Services</a>
                                    <a href='https://safespaceph.com/contact' class='footer-link'>Contact Us</a>
                                </div>
                                <p>&copy; 2025 SafeSpace PH. All rights reserved.</p>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </tr>
        </table>
    </center>
</body>
</html>";
        $mail->send();
    } catch (Exception $e) {
        error_log("Meeting link update email error for {$recipientEmail}: {$mail->ErrorInfo}");
    }
}



function sendVerificationRejectedNoticeToClient($recipientEmail, $recipientName, $reasonDetails = '') {
    $mail = new PHPMailer(true);
    try {
        $mail->isSMTP();
        $mail->Host = 'smtp.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = $_ENV['EMAIL_USER'];
        $mail->Password = $_ENV['EMAIL_PASS'];
        $mail->SMTPSecure = 'tls';
        $mail->Port = 587;

        $mail->setFrom($_ENV['EMAIL_USER'], 'SafeSpace PH');
        $mail->addAddress($recipientEmail, $recipientName);

        $mail->isHTML(true);
        $mail->Subject = 'Important: Your SafeSpace PH Verification Application Update';
        $mail->addEmbeddedImage('img/logo.png', 'logoimg');
        $mail->addEmbeddedImage('img/logo.png', 'logoimg_footer');

        $rejectionReasonHtml = '';
        if (!empty($reasonDetails)) {
            $rejectionReasonHtml = "
                <p>Specifically, the reason for rejection is:</p>
                <ul>
                    <li>{$reasonDetails}</li>
                </ul>
            ";
        }

        $mail->Body = "
        <!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>SafeSpace PH: Verification Application Rejected</title>
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; width: 100% !important; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        td { padding: 0; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        a { text-decoration: none; color: #8a2be2; }
        .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .header { background-color: #391053; padding: 20px 30px; text-align: center; color: white; }
        .header-logo { height: 70px; width: auto; vertical-align: middle; margin-right: 15px; }
        .header-title { font-size: 28px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); vertical-align: middle; }
        .content { padding: 30px; color: #333333; line-height: 1.6; font-size: 16px; }
        .content h2 { font-size: 22px; color: #5d00a0; margin-top: 25px; margin-bottom: 15px; }
        .content ul { list-style: none; padding: 0; margin: 0; }
        .content ul li { margin-bottom: 10px; padding-left: 25px; position: relative; }
        .content ul li:before { content: '•'; color: #8a2be2; font-size: 20px; position: absolute; left: 0; top: -2px; }
        .button-container { text-align: center; margin-top: 30px; margin-bottom: 20px; }
        .button { display: inline-block; background-color: #8a2be2; color: white; padding: 12px 25px; border-radius: 25px; font-size: 17px; font-weight: bold; text-decoration: none; transition: background-color 0.3s ease; }
        .button:hover { background-color: #6a0dad; }
        .footer { background-color: #391053; color: white; padding: 20px 30px; text-align: center; font-size: 14px; border-top: 1px solid #5d00a0; }
        .footer-branding { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }
        .footer-logo { height: 50px; width: auto; }
        .footer-title { font-size: 24px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); }
        .footer-links-container { margin-bottom: 10px; }
        .footer a { color: #e0caff; text-decoration: none; margin: 0 8px; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <center>
        <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%' style='background-color: #f4f4f4;'>
            <tr>
                <td align='center' style='padding: 20px 0;'>
                    <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='600' class='email-container'>
                        <tr>
                            <td class='header'>
                                <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%'>
                                    <tr>
                                        <td style='text-align: center;'>
                                            <img src=\"cid:logoimg\" alt=\"SafeSpace PH Logo\" style=\"height: 70px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                            <span class='header-title'>SafeSpace PH</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class='content'>
                                <p>Dear {$recipientName},</p>
                                <p>We regret to inform you that your **identity verification application** with SafeSpace PH has been **rejected**.</p>
                                {$rejectionReasonHtml}
                                <p>This decision might be due to one or more of the following common reasons:</p>
                                <ul>
                                    <li>**Incomplete or Incorrect Documents:** Some required documents may have been missing or contained inaccuracies.</li>
                                    <li>**Unclear or Illegible Submissions:** The uploaded images or documents might have been blurry, dark, or otherwise unreadable.</li>
                                    <li>**Information Mismatch:** The details provided in your application did not consistently match the information on your submitted documents.</li>
                                    <li>**Ineligible Application:** Your application may not have met the specific criteria for verification.</li>
                                    <li>**Security Concerns:** Our team identified discrepancies or potential security risks during the review process.</li>
                                </ul>
                                <p>We understand this might be disappointing. We encourage you to **review your application details and submitted documents carefully** against our requirements.</p>
                                <div class='button-container'>
                                    <a href='https://safespaceph.com/my-account' class='button'>Review My Account / Reapply</a>
                                </div>
                                <p>If you believe this is an error or need further clarification, please contact our support team, providing as much detail as possible about your application.</p>
                                <p>Thank you for your understanding.</p>
                                <p>Sincerely,<br>The SafeSpace PH Team</p>
                            </td>
                        </tr>
                        <tr>
                            <td class='footer'>
                                <div class='footer-branding'>
                                   <img src=\"cid:logoimg_footer\"alt=\"SafeSpace PH Logo\" style=\"height: 50px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                    <span class='footer-title'>SafeSpace PH</span>
                                </div>
                                <div class='footer-links-container'>
                                    <a href='https://safespaceph.com/about' class='footer-link'>About Us</a>
                                    <a href='https://safespaceph.com/services' class='footer-link'>Our Services</a>
                                    <a href='https://safespaceph.com/contact' class='footer-link'>Contact Us</a>
                                </div>
                                <p>&copy; 2025 SafeSpace PH. All rights reserved.</p>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </center>
</body>
</html>";
        $mail->send();
    } catch (Exception $e) {
        error_log("Verification rejection email error for {$recipientEmail}: {$mail->ErrorInfo}");
    }
}


function sendAccountDeletionNoticeToClient($recipientEmail, $recipientName) {
    $mail = new PHPMailer(true);
    try {
        $mail->isSMTP();
        $mail->Host = 'smtp.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = $_ENV['EMAIL_USER'];
        $mail->Password = $_ENV['EMAIL_PASS'];
        $mail->SMTPSecure = 'tls';
        $mail->Port = 587;

        $mail->setFrom($_ENV['EMAIL_USER'], 'SafeSpace PH');
        $mail->addAddress($recipientEmail, $recipientName);

        $mail->isHTML(true);
        $mail->Subject = 'Important Account Update: Your SafeSpace PH Account Has Been Deleted';
        $mail->addEmbeddedImage('img/logo.png', 'logoimg');
        $mail->addEmbeddedImage('img/logo.png', 'logoimg_footer');

        $mail->Body = "
        <!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>SafeSpace PH: Account Deleted</title>
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; width: 100% !important; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        td { padding: 0; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        a { text-decoration: none; color: #8a2be2; }
        .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .header { background-color: #391053; padding: 20px 30px; text-align: center; color: white; }
        .header-logo { height: 70px; width: auto; vertical-align: middle; margin-right: 15px; }
        .header-title { font-size: 28px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); vertical-align: middle; }
        .content { padding: 30px; color: #333333; line-height: 1.6; font-size: 16px; }
        .content h2 { font-size: 22px; color: #5d00a0; margin-top: 25px; margin-bottom: 15px; }
        .content ul { list-style: none; padding: 0; margin: 0; }
        .content ul li { margin-bottom: 10px; padding-left: 25px; position: relative; }
        .content ul li:before { content: '•'; color: #8a2be2; font-size: 20px; position: absolute; left: 0; top: -2px; }
        .button-container { text-align: center; margin-top: 30px; margin-bottom: 20px; }
        .button { display: inline-block; background-color: #8a2be2; color: white; padding: 12px 25px; border-radius: 25px; font-size: 17px; font-weight: bold; text-decoration: none; transition: background-color 0.3s ease; }
        .button:hover { background-color: #6a0dad; }
        .footer { background-color: #391053; color: white; padding: 20px 30px; text-align: center; font-size: 14px; border-top: 1px solid #5d00a0; }
        .footer-branding { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }
        .footer-logo { height: 50px; width: auto; }
        .footer-title { font-size: 24px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); }
        .footer-links-container { margin-bottom: 10px; }
        .footer a { color: #e0caff; text-decoration: none; margin: 0 8px; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <center>
        <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%' style='background-color: #f4f4f4;'>
            <tr>
                <td align='center' style='padding: 20px 0;'>
                    <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='600' class='email-container'>
                        <tr>
                            <td class='header'>
                                <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%'>
                                    <tr>
                                        <td style='text-align: center;'>
                                            <img src=\"cid:logoimg\" alt=\"SafeSpace PH Logo\" style=\"height: 70px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                            <span class='header-title'>SafeSpace PH</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class='content'>
                                <p>Dear {$recipientName},</p>
                                <p>We are writing to inform you that your **SafeSpace PH account has been deleted**.</p>
                                <p>This action may have been taken due to various reasons, including but not limited to:</p>
                                <ul>
                                    <li>**Duplicate Accounts:** If multiple accounts were found to be associated with your information.</li>
                                    <li>**Spam Prevention:** Detection of activity that violates our terms of service regarding spam or misuse.</li>
                                    <li>**Violation of Terms of Service:** Any breach of the SafeSpace PH terms and conditions.</li>
                                    <li>**Inactivity:** Accounts that have remained inactive for an extended period.</li>
                                </ul>
                                <p>If you believe this was done in error or require further clarification, please do not hesitate to contact our support team. Provide your previous account details to help us investigate.</p>
                                <div class='button-container'>
                                    <a href='https://safespaceph.com/contact' class='button'>Contact Support</a>
                                </div>
                                <p>Thank you for your understanding.</p>
                                <p>Sincerely,<br>The SafeSpace PH Team</p>
                            </td>
                        </tr>
                        <tr>
                            <td class='footer'>
                                <div class='footer-branding'>
                                   <img src=\"cid:logoimg_footer\"alt=\"SafeSpace PH Logo\" style=\"height: 50px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                    <span class='footer-title'>SafeSpace PH</span>
                                </div>
                                <div class='footer-links-container'>
                                    <a href='https://safespaceph.com/about' class='footer-link'>About Us</a>
                                    <a href='https://safespaceph.com/services' class='footer-link'>Our Services</a>
                                    <a href='https://safespaceph.com/contact' class='footer-link'>Contact Us</a>
                                </div>
                                <p>&copy; 2025 SafeSpace PH. All rights reserved.</p>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </center>
</body>
</html>";
        $mail->send();
    } catch (Exception $e) {
        error_log("Account deletion email error for {$recipientEmail}: {$mail->ErrorInfo}");
    }
}





function sendVerificationApprovedNoticeToClient($recipientEmail, $recipientName) {
    $mail = new PHPMailer(true);
    try {
        $mail->isSMTP();
        $mail->Host = 'smtp.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = $_ENV['EMAIL_USER'];
        $mail->Password = $_ENV['EMAIL_PASS'];
        $mail->SMTPSecure = 'tls';
        $mail->Port = 587;

        $mail->setFrom($_ENV['EMAIL_USER'], 'SafeSpace PH');
        $mail->addAddress($recipientEmail, $recipientName);

        $mail->isHTML(true);
        $mail->Subject = 'Great News! Your SafeSpace PH Account is Verified!';
        $mail->addEmbeddedImage('img/logo.png', 'logoimg');
        $mail->addEmbeddedImage('img/logo.png', 'logoimg_footer');

        $mail->Body = "
        <!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>SafeSpace PH: Account Verified!</title>
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; width: 100% !important; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        td { padding: 0; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        a { text-decoration: none; color: #8a2be2; }
        .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .header { background-color: #391053; padding: 20px 30px; text-align: center; color: white; }
        .header-logo { height: 70px; width: auto; vertical-align: middle; margin-right: 15px; }
        .header-title { font-size: 28px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); vertical-align: middle; }
        .content { padding: 30px; color: #333333; line-height: 1.6; font-size: 16px; }
        .content h2 { font-size: 22px; color: #5d00a0; margin-top: 25px; margin-bottom: 15px; }
        .content ul { list-style: none; padding: 0; margin: 0; }
        .content ul li { margin-bottom: 10px; padding-left: 25px; position: relative; }
        .content ul li:before { content: '•'; color: #8a2be2; font-size: 20px; position: absolute; left: 0; top: -2px; }
        .button-container { text-align: center; margin-top: 30px; margin-bottom: 20px; }
        .button { display: inline-block; background-color: #8a2be2; color: white; padding: 12px 25px; border-radius: 25px; font-size: 17px; font-weight: bold; text-decoration: none; transition: background-color 0.3s ease; }
        .button:hover { background-color: #6a0dad; }
        .footer { background-color: #391053; color: white; padding: 20px 30px; text-align: center; font-size: 14px; border-top: 1px solid #5d00a0; }
        .footer-branding { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }
        .footer-logo { height: 50px; width: auto; }
        .footer-title { font-size: 24px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); }
        .footer-links-container { margin-bottom: 10px; }
        .footer a { color: #e0caff; text-decoration: none; margin: 0 8px; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <center>
        <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%' style='background-color: #f4f4f4;'>
            <tr>
                <td align='center' style='padding: 20px 0;'>
                    <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='600' class='email-container'>
                        <tr>
                            <td class='header'>
                                <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%'>
                                    <tr>
                                        <td style='text-align: center;'>
                                            <img src=\"cid:logoimg\" alt=\"SafeSpace PH Logo\" style=\"height: 70px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                            <span class='header-title'>SafeSpace PH</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class='content'>
                                <p>Dear {$recipientName},</p>
                                <p>We have exciting news! Your **identity verification application** for SafeSpace PH has been **approved**!</p>
                                <p>You are now a **fully verified member** of our community, which unlocks all features and ensures you can access the legal assistance you need with confidence and security.</p>
                                <h2>What's Next?</h2>
                                <ul>
                                    <li>You can now **book appointments** with our verified lawyers.</li>
                                    <li>Explore all resources and features available to verified clients.</li>
                                    <li>Rest assured that your profile reflects your verified status, building trust within the platform.</li>
                                </ul>
                                <p>Thank you for taking the time to complete the verification process. This helps us maintain a safe and reliable environment for all users.</p>
                                <div class='button-container'>
                                    <a href='https://safespaceph.com/my-account' class='button'>Go to My Account</a>
                                </div>
                                <p>We're thrilled to have you as a verified member of SafeSpace PH!</p>
                                <p>Sincerely,<br>The SafeSpace PH Team</p>
                            </td>
                        </tr>
                        <tr>
                            <td class='footer'>
                                <div class='footer-branding'>
                                   <img src=\"cid:logoimg_footer\"alt=\"SafeSpace PH Logo\" style=\"height: 50px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                    <span class='footer-title'>SafeSpace PH</span>
                                </div>
                                <div class='footer-links-container'>
                                    <a href='https://safespaceph.com/about' class='footer-link'>About Us</a>
                                    <a href='https://safespaceph.com/services' class='footer-link'>Our Services</a>
                                    <a href='https://safespaceph.com/contact' class='footer-link'>Contact Us</a>
                                </div>
                                <p>&copy; 2025 SafeSpace PH. All rights reserved.</p>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </tr>
        </table>
    </center>
</body>
</html>";
        $mail->send();
    } catch (Exception $e) {
        error_log("Verification approval email error for {$recipientEmail}: {$mail->ErrorInfo}");
    }
}



function sendLawyerVerificationApprovedNoticeToLawyer($recipientEmail, $recipientName) {
    $mail = new PHPMailer(true);
    try {
        $mail->isSMTP();
        $mail->Host = 'smtp.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = $_ENV['EMAIL_USER'];
        $mail->Password = $_ENV['EMAIL_PASS'];
        $mail->SMTPSecure = 'tls';
        $mail->Port = 587;

        $mail->setFrom($_ENV['EMAIL_USER'], 'SafeSpace PH');
        $mail->addAddress($recipientEmail, $recipientName);

        $mail->isHTML(true);
        $mail->Subject = 'Congratulations! Your SafeSpace PH Lawyer Application is Approved!';
        $mail->addEmbeddedImage('img/logo.png', 'logoimg');
        $mail->addEmbeddedImage('img/logo.png', 'logoimg_footer');

        $mail->Body = "
        <!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>SafeSpace PH: Lawyer Application Approved!</title>
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; width: 100% !important; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        td { padding: 0; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        a { text-decoration: none; color: #8a2be2; }
        .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .header { background-color: #391053; padding: 20px 30px; text-align: center; color: white; }
        .header-logo { height: 70px; width: auto; vertical-align: middle; margin-right: 15px; }
        .header-title { font-size: 28px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); vertical-align: middle; }
        .content { padding: 30px; color: #333333; line-height: 1.6; font-size: 16px; }
        .content h2 { font-size: 22px; color: #5d00a0; margin-top: 25px; margin-bottom: 15px; }
        .content ul { list-style: none; padding: 0; margin: 0; }
        .content ul li { margin-bottom: 10px; padding-left: 25px; position: relative; }
        .content ul li:before { content: '•'; color: #8a2be2; font-size: 20px; position: absolute; left: 0; top: -2px; }
        .button-container { text-align: center; margin-top: 30px; margin-bottom: 20px; }
        .button { display: inline-block; background-color: #8a2be2; color: white; padding: 12px 25px; border-radius: 25px; font-size: 17px; font-weight: bold; text-decoration: none; transition: background-color 0.3s ease; }
        .button:hover { background-color: #6a0dad; }
        .footer { background-color: #391053; color: white; padding: 20px 30px; text-align: center; font-size: 14px; border-top: 1px solid #5d00a0; }
        .footer-branding { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }
        .footer-logo { height: 50px; width: auto; }
        .footer-title { font-size: 24px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); }
        .footer-links-container { margin-bottom: 10px; }
        .footer a { color: #e0caff; text-decoration: none; margin: 0 8px; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <center>
        <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%' style='background-color: #f4f4f4;'>
            <tr>
                <td align='center' style='padding: 20px 0;'>
                    <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='600' class='email-container'>
                        <tr>
                            <td class='header'>
                                <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%'>
                                    <tr>
                                        <td style='text-align: center;'>
                                            <img src=\"cid:logoimg\" alt=\"SafeSpace PH Logo\" style=\"height: 70px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                            <span class='header-title'>SafeSpace PH</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class='content'>
                                <p>Dear Attorney {$recipientName},</p>
                                <p>We have fantastic news! Your **application to become a volunteer lawyer** with SafeSpace PH has been **approved**!</p>
                                <p>Welcome to our network of dedicated legal professionals. We are truly grateful for your willingness to contribute your expertise to help those in need and uphold the principles of the Safe Spaces Act.</p>
                                <h2>What Happens Next?</h2>
                                <ul>
                                    <li>Your lawyer profile is now **active** on SafeSpace PH.</li>
                                    <li>You can start **receiving appointment requests** from clients seeking legal assistance.</li>
                                    <li>Familiarize yourself with your **lawyer dashboard** to manage your schedule, review cases, and access resources.</li>
                                    <li>If you haven't already, please **set up your availability and preferred meeting methods** on your profile so clients can book you effectively.</li>
                                </ul>
                                <p>We're excited to have you on board and look forward to the positive impact you'll make in the lives of our clients.</p>
                                <div class='button-container'>
                                    <a href='https://safespaceph.com/lawyer-dashboard' class='button'>Go to Your Lawyer Dashboard</a>
                                </div>
                                <p>Should you have any questions as you get started, please refer to our lawyer's FAQ or contact our support team.</p>
                                <p>Thank you for joining the SafeSpace PH mission!</p>
                                <p>Sincerely,<br>The SafeSpace PH Team</p>
                            </td>
                        </tr>
                        <tr>
                            <td class='footer'>
                                <div class='footer-branding'>
                                   <img src=\"cid:logoimg_footer\"alt=\"SafeSpace PH Logo\" style=\"height: 50px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                    <span class='footer-title'>SafeSpace PH</span>
                                </div>
                                <div class='footer-links-container'>
                                    <a href='https://safespaceph.com/about' class='footer-link'>About Us</a>
                                    <a href='https://safespaceph.com/services' class='footer-link'>Our Services</a>
                                    <a href='https://safespaceph.com/contact' class='footer-link'>Contact Us</a>
                                </div>
                                <p>&copy; 2025 SafeSpace PH. All rights reserved.</p>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </tr>
        </table>
    </center>
</body>
</html>";
        $mail->send();
    } catch (Exception $e) {
        error_log("Lawyer verification approval email error for {$recipientEmail}: {$mail->ErrorInfo}");
    }
}



function sendLawyerUnverifiedNoticeToLawyer($recipientEmail, $recipientName, $reasonDetails = '') {
    $mail = new PHPMailer(true);
    try {
        $mail->isSMTP();
        $mail->Host = 'smtp.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = $_ENV['EMAIL_USER'];
        $mail->Password = $_ENV['EMAIL_PASS'];
        $mail->SMTPSecure = 'tls';
        $mail->Port = 587;

        $mail->setFrom($_ENV['EMAIL_USER'], 'SafeSpace PH');
        $mail->addAddress($recipientEmail, $recipientName);

        $mail->isHTML(true);
        $mail->Subject = 'Important Account Update: Your SafeSpace PH Lawyer Status is Unverified';
        $mail->addEmbeddedImage('img/logo.png', 'logoimg');
        $mail->addEmbeddedImage('img/logo.png', 'logoimg_footer');

        $reasonSectionHtml = '';
        if (!empty($reasonDetails)) {
            $reasonSectionHtml = "
                <p>The specific reason for this change is:</p>
                <ul>
                    <li>{$reasonDetails}</li>
                </ul>
            ";
        }

        $mail->Body = "
        <!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>SafeSpace PH: Lawyer Unverified</title>
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; width: 100% !important; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        td { padding: 0; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        a { text-decoration: none; color: #8a2be2; }
        .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .header { background-color: #391053; padding: 20px 30px; text-align: center; color: white; }
        .header-logo { height: 70px; width: auto; vertical-align: middle; margin-right: 15px; }
        .header-title { font-size: 28px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); vertical-align: middle; }
        .content { padding: 30px; color: #333333; line-height: 1.6; font-size: 16px; }
        .content h2 { font-size: 22px; color: #5d00a0; margin-top: 25px; margin-bottom: 15px; }
        .content ul { list-style: none; padding: 0; margin: 0; }
        .content ul li { margin-bottom: 10px; padding-left: 25px; position: relative; }
        .content ul li:before { content: '•'; color: #8a2be2; font-size: 20px; position: absolute; left: 0; top: -2px; }
        .button-container { text-align: center; margin-top: 30px; margin-bottom: 20px; }
        .button { display: inline-block; background-color: #8a2be2; color: white; padding: 12px 25px; border-radius: 25px; font-size: 17px; font-weight: bold; text-decoration: none; transition: background-color 0.3s ease; }
        .button:hover { background-color: #6a0dad; }
        .footer { background-color: #391053; color: white; padding: 20px 30px; text-align: center; font-size: 14px; border-top: 1px solid #5d00a0; }
        .footer-branding { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }
        .footer-logo { height: 50px; width: auto; }
        .footer-title { font-size: 24px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); }
        .footer-links-container { margin-bottom: 10px; }
        .footer a { color: #e0caff; text-decoration: none; margin: 0 8px; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <center>
        <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%' style='background-color: #f4f4f4;'>
            <tr>
                <td align='center' style='padding: 20px 0;'>
                    <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='600' class='email-container'>
                        <tr>
                            <td class='header'>
                                <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%'>
                                    <tr>
                                        <td style='text-align: center;'>
                                            <img src=\"cid:logoimg\" alt=\"SafeSpace PH Logo\" style=\"height: 70px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                            <span class='header-title'>SafeSpace PH</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class='content'>
                                <p>Dear Attorney {$recipientName},</p>
                                <p>We are writing to inform you that your **SafeSpace PH lawyer status has been unverified**.</p>
                                {$reasonSectionHtml}
                                <p>This may be due to various reasons, such as:</p>
                                <ul>
                                    <li>**Expiring or Invalid Credentials:** Your legal credentials or submitted documents may have expired or were found to be invalid during a review.</li>
                                    <li>**Information Discrepancy:** A recent review identified a mismatch between your profile details and your verification documents.</li>
                                    <li>**Compliance Review:** Your verification status was reset as part of a routine or specific compliance check.</li>
                                    <li>**Violation of Terms of Service:** Any breach of SafeSpace PH's terms and conditions or professional conduct guidelines.</li>
                                    <li>**Request for Re-verification:** In some cases, we may require lawyers to re-verify their credentials to ensure continued validity and security.</li>
                                </ul>
                                <p>As an unverified lawyer, your profile may no longer be visible to clients, and you may not receive new appointment requests. To regain full access and resume taking cases, you will need to **re-submit your verification documents**.</p>
                                <div class='button-container'>
                                    <a href='https://safespaceph.com/lawyer-dashboard' class='button'>Review Your Lawyer Dashboard</a>
                                </div>
                                <p>If you believe this is an error or have any questions regarding your unverified status, please contact our support team with your account details.</p>
                                <p>Thank you for your understanding.</p>
                                <p>Sincerely,<br>The SafeSpace PH Team</p>
                            </td>
                        </tr>
                        <tr>
                            <td class='footer'>
                                <div class='footer-branding'>
                                   <img src=\"cid:logoimg_footer\"alt=\"SafeSpace PH Logo\" style=\"height: 50px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                    <span class='footer-title'>SafeSpace PH</span>
                                </div>
                                <div class='footer-links-container'>
                                    <a href='https://safespaceph.com/about' class='footer-link'>About Us</a>
                                    <a href='https://safespaceph.com/services' class='footer-link'>Our Services</a>
                                    <a href='https://safespaceph.com/contact' class='footer-link'>Contact Us</a>
                                </div>
                                <p>&copy; 2025 SafeSpace PH. All rights reserved.</p>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </tr>
        </table>
    </center>
</body>
</html>";
        $mail->send();
    } catch (Exception $e) {
        error_log("Lawyer unverification email error for {$recipientEmail}: {$mail->ErrorInfo}");
    }
}



function sendGoodbyeEmailOnAccountDeletion($recipientEmail, $recipientName) {
    $mail = new PHPMailer(true);
    try {
        $mail->isSMTP();
        $mail->Host = 'smtp.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = $_ENV['EMAIL_USER'];
        $mail->Password = $_ENV['EMAIL_PASS'];
        $mail->SMTPSecure = 'tls';
        $mail->Port = 587;

        $mail->setFrom($_ENV['EMAIL_USER'], 'SafeSpace PH');
        $mail->addAddress($recipientEmail, $recipientName);

        $mail->isHTML(true);
        $mail->Subject = 'We\'re Sad to See You Go - SafeSpace PH';
        $mail->addEmbeddedImage('img/logo.png', 'logoimg');
        $mail->addEmbeddedImage('img/logo.png', 'logoimg_footer');

        $mail->Body = "
        <!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>SafeSpace PH: Goodbye</title>
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; width: 100% !important; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        td { padding: 0; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        a { text-decoration: none; color: #8a2be2; }
        .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .header { background-color: #391053; padding: 20px 30px; text-align: center; color: white; }
        .header-logo { height: 70px; width: auto; vertical-align: middle; margin-right: 15px; }
        .header-title { font-size: 28px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); vertical-align: middle; }
        .content { padding: 30px; color: #333333; line-height: 1.6; font-size: 16px; }
        .content h2 { font-size: 22px; color: #5d00a0; margin-top: 25px; margin-bottom: 15px; }
        .content ul { list-style: none; padding: 0; margin: 0; }
        .content ul li { margin-bottom: 10px; padding-left: 25px; position: relative; }
        .content ul li:before { content: '•'; color: #8a2be2; font-size: 20px; position: absolute; left: 0; top: -2px; }
        .button-container { text-align: center; margin-top: 30px; margin-bottom: 20px; }
        .button { display: inline-block; background-color: #8a2be2; color: white; padding: 12px 25px; border-radius: 25px; font-size: 17px; font-weight: bold; text-decoration: none; transition: background-color 0.3s ease; }
        .button:hover { background-color: #6a0dad; }
        .footer { background-color: #391053; color: white; padding: 20px 30px; text-align: center; font-size: 14px; border-top: 1px solid #5d00a0; }
        .footer-branding { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }
        .footer-logo { height: 50px; width: auto; }
        .footer-title { font-size: 24px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); }
        .footer-links-container { margin-bottom: 10px; }
        .footer a { color: #e0caff; text-decoration: none; margin: 0 8px; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <center>
        <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%' style='background-color: #f4f4f4;'>
            <tr>
                <td align='center' style='padding: 20px 0;'>
                    <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='600' class='email-container'>
                        <tr>
                            <td class='header'>
                                <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%'>
                                    <tr>
                                        <td style='text-align: center;'>
                                            <img src=\"cid:logoimg\" alt=\"SafeSpace PH Logo\" style=\"height: 70px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                            <span class='header-title'>SafeSpace PH</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class='content'>
                                <p>Dear {$recipientName},</p>
                                <p>We're genuinely sorry to know that you've decided to **part ways with SafeSpace PH** and have chosen to delete your account.</p>
                                <p>Your presence was valued, and we understand that circumstances change. We aim to provide the best possible support and legal assistance, and your feedback is always important to us.</p>
                                <p>If there's anything specific that led to your decision, or if you encountered any issues during your time with us, please feel free to share your thoughts by replying to this email. Your insights can help us improve for others in the future.</p>
                                <p>We wish you all the best in your future endeavors. Should you ever need legal assistance or support related to the Safe Spaces Act again, please know that SafeSpace PH will always be here to help.</p>
                                <p>Thank you for being a part of our community.</p>
                                <p>Sincerely,<br>The SafeSpace PH Team</p>
                            </td>
                        </tr>
                        <tr>
                            <td class='footer'>
                                <div class='footer-branding'>
                                   <img src=\"cid:logoimg_footer\"alt=\"SafeSpace PH Logo\" style=\"height: 50px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                    <span class='footer-title'>SafeSpace PH</span>
                                </div>
                                <div class='footer-links-container'>
                                    <a href='https://safespaceph.com/about' class='footer-link'>About Us</a>
                                    <a href='https://safespaceph.com/services' class='footer-link'>Our Services</a>
                                    <a href='https://safespaceph.com/contact' class='footer-link'>Contact Us</a>
                                </div>
                                <p>&copy; 2025 SafeSpace PH. All rights reserved.</p>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </tr>
        </table>
    </center>
</body>
</html>";
        $mail->send();
    } catch (Exception $e) {
        error_log("Account deletion goodbye email error for {$recipientEmail}: {$mail->ErrorInfo}");
    }
}





function sendAppointmentAcceptedNoticeToUser($recipientEmail, $recipientName, $appointmentDetails) {
    $mail = new PHPMailer(true);
    try {
        $mail->isSMTP();
        $mail->Host = 'smtp.gmail.com';
        $mail->SMTPAuth = true;
        $mail->Username = $_ENV['EMAIL_USER'];
        $mail->Password = $_ENV['EMAIL_PASS'];
        $mail->SMTPSecure = 'tls';
        $mail->Port = 587;

        $mail->setFrom($_ENV['EMAIL_USER'], 'SafeSpace PH');
        $mail->addAddress($recipientEmail, $recipientName);

        $mail->isHTML(true);
        $mail->Subject = 'Your SafeSpace PH Appointment is Confirmed!';
        $mail->addEmbeddedImage('img/logo.png', 'logoimg');
        $mail->addEmbeddedImage('img/logo.png', 'logoimg_footer');

        // Extracting details from the $appointmentDetails array
        $lawyerName = $appointmentDetails['lawyerName'] ?? 'N/A';
        $appointmentDate = $appointmentDetails['appointmentDate'] ?? 'N/A';
        $appointmentTime = $appointmentDetails['appointmentTime'] ?? 'N/A';
        $meetingType = $appointmentDetails['meetingType'] ?? 'N/A';
        $meetingLink = $appointmentDetails['meetingLink'] ?? '#'; // Provide a default or handle missing link
        $caseTitle = $appointmentDetails['caseTitle'] ?? 'N/A';
        $caseDescription = $appointmentDetails['caseDescription'] ?? 'N/A';

        $mail->Body = "
        <!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>SafeSpace PH: Your Appointment is Confirmed!</title>
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; width: 100% !important; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        td { padding: 0; }
        img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }
        a { text-decoration: none; color: #8a2be2; }
        .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .header { background-color: #391053; padding: 20px 30px; text-align: center; color: white; }
        .header-logo { height: 70px; width: auto; vertical-align: middle; margin-right: 15px; }
        .header-title { font-size: 28px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); vertical-align: middle; }
        .content { padding: 30px; color: #333333; line-height: 1.6; font-size: 16px; }
        .content h2 { font-size: 22px; color: #5d00a0; margin-top: 25px; margin-bottom: 15px; }
        .content ul { list-style: none; padding: 0; margin: 0; }
        .content ul li { margin-bottom: 10px; padding-left: 25px; position: relative; }
        .content ul li:before { content: '•'; color: #8a2be2; font-size: 20px; position: absolute; left: 0; top: -2px; }
        .button-container { text-align: center; margin-top: 30px; margin-bottom: 20px; }
        .button { display: inline-block; background-color: #8a2be2; color: white; padding: 12px 25px; border-radius: 25px; font-size: 17px; font-weight: bold; text-decoration: none; transition: background-color 0.3s ease; }
        .button:hover { background-color: #6a0dad; }
        .footer { background-color: #391053; color: white; padding: 20px 30px; text-align: center; font-size: 14px; border-top: 1px solid #5d00a0; }
        .footer-branding { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 15px; }
        .footer-logo { height: 50px; width: auto; }
        .footer-title { font-size: 24px; font-weight: 1000; color: #ffffff; white-space: nowrap; text-shadow: 2px 2px 10px rgba(57, 16, 83, 0.3); }
        .footer-links-container { margin-bottom: 10px; }
        .footer a { color: #e0caff; text-decoration: none; margin: 0 8px; }
        .footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <center>
        <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%' style='background-color: #f4f4f4;'>
            <tr>
                <td align='center' style='padding: 20px 0;'>
                    <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='600' class='email-container'>
                        <tr>
                            <td class='header'>
                                <table role='presentation' cellspacing='0' cellpadding='0' border='0' width='100%'>
                                    <tr>
                                        <td style='text-align: center;'>
                                            <img src=\"cid:logoimg\" alt=\"SafeSpace PH Logo\" style=\"height: 70px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                            <span class='header-title'>SafeSpace PH</span>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class='content'>
                                <p>Dear {$recipientName},</p>
                                <p>Great news! Your **appointment with a lawyer** at SafeSpace PH has been successfully **accepted**.</p>
                                <p>We're pleased to inform you that **Attorney {$lawyerName}** has accepted your request and is ready to assist you.</p>
                                <h2>Your Confirmed Appointment Details:</h2>
                                <ul>
                                    <li><strong>Lawyer:</strong> Attorney {$lawyerName}</li>
                                    <li><strong>Date:</strong> {$appointmentDate}</li>
                                    <li><strong>Time:</strong> {$appointmentTime} (PHT)</li>
                                    <li><strong>Meeting Type:</strong> {$meetingType}</li>
                                    <li><strong>Meeting Link:</strong> <a href='{$meetingLink}' style='color: #8a2be2; word-break: break-all;'>{$meetingLink}</a></li>
                                    <li><strong>Case Title/Concern:</strong> {$caseTitle}</li>
                                    <li><strong>Case Description:</strong> {$caseDescription}</li>
                                </ul>
                                <p>Please make sure to click the **meeting link** at the scheduled time to join your consultation. If you have any documents or information relevant to your case, please prepare them beforehand.</p>
                                <p>We encourage you to review the **Safe Spaces Act (RA 11313)** beforehand to better understand your rights. You can find more information on our website.</p>
                                <div class='button-container'>
                                    <a href='https://safespaceph.com/my-appointments' class='button'>View My Appointments</a>
                                </div>
                                <p>If you need to reschedule or cancel your appointment, please do so at least 24 hours in advance through your SafeSpace PH account or by contacting our support team.</p>
                                <p>We look forward to assisting you.</p>
                                <p>Sincerely,<br>The SafeSpace PH Team</p>
                            </td>
                        </tr>
                        <tr>
                            <td class='footer'>
                                <div class='footer-branding'>
                                   <img src=\"cid:logoimg_footer\"alt=\"SafeSpace PH Logo\" style=\"height: 50px; width: auto; vertical-align: middle; margin-right: 15px;\">
                                    <span class='footer-title'>SafeSpace PH</span>
                                </div>
                                <div class='footer-links-container'>
                                    <a href='https://safespaceph.com/about' class='footer-link'>About Us</a>
                                    <a href='https://safespaceph.com/services' class='footer-link'>Our Services</a>
                                    <a href='https://safespaceph.com/contact' class='footer-link'>Contact Us</a>
                                </div>
                                <p>&copy; 2025 SafeSpace PH. All rights reserved.</p>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </tr>
        </table>
    </center>
</body>
</html>";
        $mail->send();
    } catch (Exception $e) {
        error_log("Appointment accepted email error for {$recipientEmail}: {$mail->ErrorInfo}");
    }
}